# 브라우저 렌더링 과정

![](https://i.stack.imgur.com/vgtHG.png)

1. Dom Tree 구축
브라우저 렌더링 엔진(크롬에선 블링크)은 응답 받은 HTML코드를 파싱하여 DOM Tree를 생성합니다.
(Dom tree 는 html 페이지를 구조화해서 계층으로 표현한 것을 의미)

1. CSSOM 트리 구축
Css 파일과 함께 스타일 요소도 파싱되어 cssom 트리를 생성합니다.

1. JS 실행
HTML 중간에 script 태그를 만나면 파싱이 중단되고 js가 모두 불러와 지면 다시 파싱한다.

1. 렌더링 트리 생성 
Dom 과 CSSOM 으로 화면에 출력될 내용을 나타내는 렌더링 트리를 만든다.-

1. 레이아웃 생성
렌더트리의 노드들을 화면에 올바른 위치에 표시하여 레이아웃을 생성한다.

1. 페인팅
마지막 단계, 눈에 보이는 내용을 픽셀로 변환해 브라우저에 표시

<br/><br/><br/>



1. 브라우저가 렌더링에 필요한 소스들을 서버에다가 요청하고 응답받는다.

2. 브라우저 렌더링 엔진(크롬에선 블링크)은 응답 받은 HTML, CSS를 파싱하여 DOM TREE 와 CSSOM TREE를 구축한다.

3. DOM과 CSSOM 가 결합되어 렌더링 트리를 생성한다.

4. 이후 렌더링 엔진이 JS를 만나면 dom 생성을을 멈추고 자바스크립트 엔진이 서버로부터 응답된 자바스크립트를 파싱한다.(렌더링 엔진 파싱 중단.)

<br/>

`파싱(Parsing) 이란?
브라우저가 코드를 사용하기 쉬운 구조로 변환(파싱 결과, DOM Tree or Node Tree로 표현 된다)하는 것.
렌더 트리를 기반으로 HTML 요소의 레이아웃을 생성하고 브라우저에 픽셀을 표시하는 페인팅을 한다.`


<br/><br/>

사용자가 브라우저에 접속하면 브라우저가 서버에 http 요청을 하고 서버가 이에 응답한다.

서버가 응답한 데이터를 HTML 파싱으로 Dom 트리를 생성하고
중간에 style 태그가 나오면 dom 트리 생성을 중단하고 css를 파싱하여 cssom tree를 생성한다. cssom 트리가 완성되면 다시 dom 트리를 생성하는데 이때 script 태그를 만나면 자바스크립트 엔진이 실행된다.
최종적으로 dom 트리와 cssom 트리가 완성되면 이를 결합한 render 트리가 생성된다.
<constructor>
렌더링 엔진은 렌더트리의 노드들을 화면에 배치하여 레이아웃을 생성하고, 노드의 ui를 그린다. 마지막으로 노드들을 순서대로 구성하는 composition 단계로 마무리된다. 

그리고 최종적으로 브라우저가 사용자에게 결과 화면을 출력한다.


브라우저의 렌더링 과정.
유저가 검색창에 url 주소를 입력하면 브라우저가 서버로 해당 사이트에 대한 데이터를 요청한다.
html, css, js 외에도 폰트나 파일들을 요청한다. 서버로부터 응답을 받으면 브라우저의 렌더링 엔진은 html을 파싱한다. html 을 파싱하여 Dom 을 생성하고 css도 파싱하여 CSSOM 을 생성한다. DOM과 CSSOM 이 생성되면 이 둘을 결합하여 렌더트리를 생성한다. 렌더링 엔진이 script 태그를 만나면 잠시 DOM 생성을 중단하고 자바스크립트 엔진에게 제어권을 넘기고 자바스크립트 엔진이 자바스크립트를 파싱한다. 최종적으로 결정된 렌더트리의 요소를 토대로 레이아웃을 만들고 웹브라우저에 페인팅한다.
