# 기본형 데이터와 참조형 데이터

불변성, 가변성은 데이터 영역 메모리가 변경되냐 안 되냐에 따라 구분된다.

데이터 영역 메모리의 변경이 없으면 불변값. 데이터 영역 메모리가 변경되면 가변값.

메모리의 영역은 주소와 데이터로 구성되어 있고 그 데이터 안에 무엇이 있느냐에 따라서 변수 영역 (식별자가 있음)과 데이터 영역으로 나뉘어진다.<br/><br/><br/><br/><br/>

## 불변값

기본형 데이터(숫자, 문자열, 불리언, null, undefined 등)는 모두 불변값이다.<br/><br/>


```js
var a = '호랑';
a = a + '나비';

a
// '호랑나비
```

변수 a를 ‘호랑’으로 저장하고 그 아래에 a =  a+’나비’ 를 했더니 a 는 ‘호랑나비’를 출력한다.

이건 처음에 ‘호랑’ 을 ‘호랑 나비’ 로 그 자체를 바꾼 것이 아니라 ‘호랑나비’ 를 새로운 데이터 영역에 만들어서 그 새롭게 만든 데이터 영역의 주소를 변수 영역 a에 할당한 것이다.

즉, 어딘가에는 ‘호랑’이라는 데이터가 여전히 존재하고, 그 데이터는 ‘호랑나비’로 자체가 변한 것이 아니다. 현재 상태는 데이터 영역 어딘가에 ‘호랑’ 과 ‘호랑나비’가 존재하고 있다.

’호랑’ 데이터 영역이 ‘호랑나비’ 로 바뀌었나? 아니, 바뀌지 않았다. → 불변값<br/><br/><br/><br/>


```js
var b = 7;
var c = 7;
```
b와 c는 같은 데이터 영역의 주소를 갖고 있다.

b에서 7이라는 데이터 영역이 최초로 만들어졌다. 그 뒤로 변수 c에도 7이라는 값을 할당했는데, 이때, c는 새롭게 7이라는 데이터 영역을 만들지 않는다. 왜? 앞서 b를 선언할 때 먼저 7이라는 데이터 영역을 만들어져 있었기 때문이다.

컴퓨터는 미니멀리스트라서 재활용을 잘하고 쓸데없이 같은 데이터를 수십 개 만들지 않는다.<br/><br/><br/><br/>



```js
var b = 7;
var c = 7;

c = 10;
```

컴퓨터는 다른 데이터 영역에 10을 만들어서 그 데이터 주소를 c 에 할당한다.

마찬가지로 데이터 7은 10으로 바뀐 게 아니기 때문에 어딘가에 여전히 존재한다. → 불변값

(하지만 7 은 GC(garbage collector)의 수거 대상에 오른다.)<br/><br/><br/><br/>



## 가변값

참조형 데이터는 변수 영역이 변하는 특성 때문에 흔히들 가변값이라고 한다.

하지만 가변값이라고 말하는 경우는 객체 그 자체를 변경했을 때가 아니라 객체 내부의 프로퍼티를 변경할 때만 성립한다.<br/><br/><br/><br/>



```js
var person = {
	이름: 나비
	나이: 4
};
```
변수영역(person) ➡ 🔲프로퍼티 영역 ➡ 변수 영역(이름, 나이) ➡ 데이터 영역(나비, 4) 


**기본형 데이터와 참조형 데이터의 차이 : 객체의 🔲프로퍼티 영역이 별도로 존재한다.**<br/><br/>

컴퓨터는 식별자에 할당된 프로퍼티 주소로 이동하고 그 프로퍼티 주소에서 세부적으로 이름, 나이 프로퍼티 데이터 영역을 나눈다. 거기서 또 이름, 나이으로 데이터 영역을 할당한다.

**참조형 데이터는 기본형 데이터처럼 직접적으로 주소를 받는 게 아니라 ‘통로’ 주소(🔲프로퍼티 영역)를 갖고 그 통로를 통해서!!!! 간접적으로 데이터 주소를 받는다.**<br/><br/><br/><br/><br/>



### 객체의 프로퍼티 재할당
```js
var person = {
	이름: 나비
	나이: 4
};

person.나이 = 6;
```
person의 나이 프로퍼티를 4에서 6으로 변경했다.

객체 자체를 재할당 한 것이 아니라 객체의 프로퍼티에 재할당 했다.

참조형 데이터(객체)는 통로를 통해 데이터의 주소를 받는다. 객체 person 변수영역에서는 통로의 주소를 받는다. 그 통로에서는 이름, 나이 프로퍼티 변수 영역의 주소를 받는다. 그 변수영역은 이름과 나이에 해당하는 값의 주소를 받는다. <br/><br/>

이 마지막 단계 (해당하는 값의 주소를 받는 부분)에서 컴퓨터는 데이터 6을 찾고, 데이터 6이 없으면 새로운 데이터 영역에 6을 만들어 ‘데이터 영역 6’의 주소를 변수영역 주소에 넣는다.

엄밀히 따지면 기본형 데이터도 주솟값을 복사해오기 때문에 참조형 데이터라고 할 수 있다. 즉, 모든 데이터 타입은 참조형 데이터다.<br/><br/><br/>

**기본형 데이터와 참조형 데이터의 차이**

기본형 데이터는 주솟값 복사 과정이 한 번만 이뤄지고, 참조형은 한 단계를 더 거친다는 차이가 있다.<br/><br/><br/><br/><br/>


Ref: 도서 [코어 자바스크립트] 

2022.07.16